(self.webpackChunkspark_adhd_rn=self.webpackChunkspark_adhd_rn||[]).push([[469],{91469(e,t,r){var n=r(18772),o=r(66584);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(r(16578)),a=n(r(3791)),i=n(r(26007)),l=n(r(58361)),u=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var r,n,s={__proto__:null,default:e};if(null===e||"object"!=o(e)&&"function"!=typeof e)return s;if(r=t){if(r.has(e))return r.get(e);r.set(e,s)}for(var a in e)"default"!==a&&{}.hasOwnProperty.call(e,a)&&((n=(r=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,a))&&(n.get||n.set)?r(s,a,n):s[a]=e[a]);return s}(e)}(r(25602)),c=r(71582),f=n(r(98759)),m=n(r(40629)),d=n(r(31771)),p=r(56045),b=r(46586),_=this,k="C:\\Users\\Steve\\OneDrive\\Desktop\\Github Repos\\spark-adhd-backup\\src\\screens\\PomodoroScreen.tsx";function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var g=1500,h=c.StyleSheet.create({container:{flex:1,backgroundColor:b.Tokens.colors.neutral.darkest,alignItems:"center"},content:{flex:1,padding:b.Tokens.spacing[6],alignItems:"center",justifyContent:"center",width:"100%",maxWidth:b.Tokens.layout.maxWidth.prose},header:{alignItems:"center",marginBottom:b.Tokens.spacing[10]},title:{fontFamily:b.Tokens.type.fontFamily.sans,fontSize:b.Tokens.type["4xl"],fontWeight:"800",color:b.Tokens.colors.text.primary,marginBottom:b.Tokens.spacing[2],letterSpacing:2,textAlign:"center"},subtitle:T({fontFamily:b.Tokens.type.fontFamily.sans,fontSize:b.Tokens.type.base,color:b.Tokens.colors.text.tertiary,textAlign:"center",letterSpacing:1},c.Platform.select({web:{transition:b.Tokens.motion.transitions.base}})),sessionCounter:{flexDirection:"row",alignItems:"center",marginBottom:b.Tokens.spacing[8],backgroundColor:b.Tokens.colors.neutral.darker,paddingHorizontal:b.Tokens.spacing[4],paddingVertical:b.Tokens.spacing[2],borderRadius:b.Tokens.radii.none,borderWidth:1,borderColor:b.Tokens.colors.neutral.borderSubtle,gap:b.Tokens.spacing[3]},sessionBadge:{backgroundColor:b.Tokens.colors.brand[900],width:28,height:28,borderRadius:0,alignItems:"center",justifyContent:"center",borderWidth:1,borderColor:b.Tokens.colors.brand[700]},sessionCount:{fontFamily:b.Tokens.type.fontFamily.mono,color:b.Tokens.colors.brand[100],fontSize:b.Tokens.type.sm,fontWeight:"700"},sessionLabel:{fontFamily:b.Tokens.type.fontFamily.sans,color:b.Tokens.colors.text.tertiary,fontSize:b.Tokens.type.sm,letterSpacing:.5},timerCard:{alignItems:"center",justifyContent:"center",marginBottom:b.Tokens.spacing[12],width:280,height:280,position:"relative",borderRadius:b.Tokens.radii.full,backgroundColor:b.Tokens.colors.neutral.darker,borderWidth:1,borderColor:b.Tokens.colors.neutral.borderSubtle},phaseIndicator:T({position:"absolute",top:-1,left:-1,right:-1,bottom:-1,borderRadius:b.Tokens.radii.full,borderWidth:2,opacity:1},c.Platform.select({web:{transition:b.Tokens.motion.transitions.slow}})),phaseIndicatorFocus:T({borderColor:b.Tokens.colors.error.main,backgroundColor:"transparent"},c.Platform.select({web:{boxShadow:"0 0 0 transparent"}})),phaseIndicatorBreak:T({borderColor:b.Tokens.colors.success.main,backgroundColor:"transparent"},c.Platform.select({web:{boxShadow:"0 0 0 transparent"}})),timer:T({fontFamily:b.Tokens.type.fontFamily.mono,fontSize:b.Tokens.type.giga,fontWeight:"700",color:b.Tokens.colors.text.primary,fontVariant:["tabular-nums"],textAlign:"center",letterSpacing:-2},c.Platform.select({web:{textShadow:"0 0 0 rgba(0,0,0,0)"}})),phaseText:T({fontFamily:b.Tokens.type.fontFamily.sans,fontSize:b.Tokens.type.xl,fontWeight:"600",marginTop:b.Tokens.spacing[2],textTransform:"uppercase",letterSpacing:2},c.Platform.select({web:{transition:b.Tokens.motion.transitions.base}})),phaseTextFocus:{color:b.Tokens.colors.error.main},phaseTextBreak:{color:b.Tokens.colors.success.main},controls:{width:"100%",maxWidth:320,gap:b.Tokens.spacing[4],marginTop:b.Tokens.spacing[8]},controlBtn:{width:"100%"}});t.default=function(){var e=(0,u.useState)(!0),t=(0,l.default)(e,2),r=t[0],n=t[1],o=(0,u.useState)(0),a=(0,l.default)(o,2),b=a[0],y=a[1],T=(0,u.useRef)(r),N=(0,u.useRef)(null),S=(0,d.default)({initialTime:g,onComplete:function(){T.current?(y(function(e){return e+1}),n(!1),T.current=!1,f.default.playCompletionSound(),v(300)):(n(!0),T.current=!0,f.default.playNotificationSound(),v(g)),setTimeout(function(){return E()},0)}}),w=S.timeLeft,O=S.isRunning,x=S.formattedTime,E=S.start,C=S.pause,P=S.reset,v=S.setTime;(0,u.useEffect)(function(){T.current=r},[r]),(0,u.useEffect)(function(){var e,t=(e=(0,i.default)(s.default.mark(function e(){var t;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,m.default.getJSON(m.default.STORAGE_KEYS.pomodoroState);case 1:if(t=e.sent){e.next=2;break}return e.abrupt("return");case 2:"boolean"==typeof t.isWorking&&n(t.isWorking),"number"==typeof t.timeLeft&&setTimeLeft(t.timeLeft),"number"==typeof t.sessions&&y(t.sessions);case 3:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)});t()},[v]),(0,u.useEffect)(function(){return N.current&&clearTimeout(N.current),N.current=setTimeout(function(){m.default.setJSON(m.default.STORAGE_KEYS.pomodoroState,{isWorking:r,timeLeft:w,sessions:b})},5e3),function(){N.current&&clearTimeout(N.current)}},[r,w,b]);var j=r?h.phaseIndicatorFocus:h.phaseIndicatorBreak,B=r?h.phaseTextFocus:h.phaseTextBreak;return u.default.createElement(c.SafeAreaView,{style:h.container,__self:_,__source:{fileName:k,lineNumber:141,columnNumber:5}},u.default.createElement(c.View,{style:h.content,__self:_,__source:{fileName:k,lineNumber:142,columnNumber:7}},u.default.createElement(c.View,{style:h.header,__self:_,__source:{fileName:k,lineNumber:143,columnNumber:9}},u.default.createElement(c.Text,{style:h.title,__self:_,__source:{fileName:k,lineNumber:144,columnNumber:11}},"POMODORO"),u.default.createElement(c.Text,{style:h.subtitle,__self:_,__source:{fileName:k,lineNumber:145,columnNumber:11}},r?"FOCUS BLOCK":"RECOVERY BREAK")),u.default.createElement(c.View,{style:h.timerCard,__self:_,__source:{fileName:k,lineNumber:150,columnNumber:9}},u.default.createElement(c.View,{style:[h.phaseIndicator,j],__self:_,__source:{fileName:k,lineNumber:151,columnNumber:11}}),u.default.createElement(c.Text,{style:h.timer,__self:_,__source:{fileName:k,lineNumber:152,columnNumber:11}},x),u.default.createElement(c.Text,{style:[h.phaseText,B],__self:_,__source:{fileName:k,lineNumber:153,columnNumber:11}},r?"ðŸ”¥ FOCUS":"ðŸŒ¿ REST")),u.default.createElement(c.View,{style:h.sessionCounter,__self:_,__source:{fileName:k,lineNumber:158,columnNumber:9}},u.default.createElement(c.View,{style:h.sessionBadge,__self:_,__source:{fileName:k,lineNumber:159,columnNumber:11}},u.default.createElement(c.Text,{style:h.sessionCount,__self:_,__source:{fileName:k,lineNumber:160,columnNumber:13}},b)),u.default.createElement(c.Text,{style:h.sessionLabel,__self:_,__source:{fileName:k,lineNumber:162,columnNumber:11}},"COMPLETED SESSIONS")),u.default.createElement(c.View,{style:h.controls,__self:_,__source:{fileName:k,lineNumber:165,columnNumber:9}},O?u.default.createElement(p.LinearButton,{title:"Pause",onPress:function(){C()},variant:"secondary",size:"lg",style:h.controlBtn,__self:_,__source:{fileName:k,lineNumber:175,columnNumber:13}}):u.default.createElement(p.LinearButton,{title:"Start Timer",onPress:function(){E()},variant:r?"primary":"secondary",size:"lg",style:h.controlBtn,__self:_,__source:{fileName:k,lineNumber:167,columnNumber:13}}),u.default.createElement(p.LinearButton,{title:"Reset",onPress:function(){P(),n(!0),T.current=!0,v(g)},variant:"ghost",size:"md",__self:_,__source:{fileName:k,lineNumber:183,columnNumber:11}}))))}}}]);
(self.webpackChunkspark_adhd_rn=self.webpackChunkspark_adhd_rn||[]).push([[469],{91469(e,t,r){var o=r(18772),n=r(66584);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=o(r(16578)),a=o(r(3791)),l=o(r(26007)),i=o(r(58361)),u=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var r,o,s={__proto__:null,default:e};if(null===e||"object"!=n(e)&&"function"!=typeof e)return s;if(r=t){if(r.has(e))return r.get(e);r.set(e,s)}for(var a in e)"default"!==a&&{}.hasOwnProperty.call(e,a)&&((o=(r=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,a))&&(o.get||o.set)?r(s,a,o):s[a]=e[a]);return s}(e)}(r(25602)),c=r(71582),f=o(r(98759)),m=o(r(40629)),d=r(15547),b=r(56045),p=r(46586),_=this,g="C:\\Users\\Steve\\OneDrive\\Desktop\\Github Repos\\spark-adhd-backup\\src\\screens\\PomodoroScreen.tsx";function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var T={focus:{bg:"rgba(239, 68, 68, 0.05)",glow:"0 0 40px ".concat(p.Tokens.colors.error.subtle)},break:{bg:"rgba(34, 197, 94, 0.05)",glow:"0 0 40px ".concat(p.Tokens.colors.success.subtle)}},h=c.StyleSheet.create({container:{flex:1,backgroundColor:p.Tokens.colors.neutral.darkest,alignItems:"center"},content:{flex:1,padding:p.Tokens.spacing[6],alignItems:"center",justifyContent:"center",width:"100%",maxWidth:680},header:{alignItems:"center",marginBottom:p.Tokens.spacing[12]},title:{fontFamily:"Inter",fontSize:40,fontWeight:"800",color:p.Tokens.colors.text.primary,marginBottom:p.Tokens.spacing[1],letterSpacing:-1},subtitle:y({fontFamily:"Inter",fontSize:p.Tokens.type.lg,color:p.Tokens.colors.text.tertiary},c.Platform.select({web:{transition:p.Tokens.motion.transitions.base}})),sessionCounter:{flexDirection:"row",alignItems:"center",marginBottom:p.Tokens.spacing[8],backgroundColor:p.Tokens.colors.neutral.darker,paddingHorizontal:p.Tokens.spacing[4],paddingVertical:p.Tokens.spacing[2],borderRadius:p.Tokens.radii.full,borderWidth:1,borderColor:p.Tokens.colors.neutral.borderSubtle,gap:p.Tokens.spacing[3]},sessionBadge:{backgroundColor:p.Tokens.colors.brand[900],width:28,height:28,borderRadius:p.Tokens.radii.full,alignItems:"center",justifyContent:"center",borderWidth:1,borderColor:p.Tokens.colors.brand[700]},sessionCount:{fontFamily:"Inter",color:p.Tokens.colors.brand[100],fontSize:p.Tokens.type.sm,fontWeight:"700"},sessionLabel:{fontFamily:"Inter",color:p.Tokens.colors.text.tertiary,fontSize:p.Tokens.type.sm},timerCard:{alignItems:"center",justifyContent:"center",marginBottom:p.Tokens.spacing[12],width:280,height:280,position:"relative"},phaseIndicator:y({position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:p.Tokens.radii.full,borderWidth:2,opacity:.5},c.Platform.select({web:{transition:p.Tokens.motion.transitions.slow}})),phaseIndicatorFocus:y({borderColor:p.Tokens.colors.error.main,backgroundColor:T.focus.bg},c.Platform.select({web:{boxShadow:T.focus.glow}})),phaseIndicatorBreak:y({borderColor:p.Tokens.colors.success.main,backgroundColor:T.break.bg},c.Platform.select({web:{boxShadow:T.break.glow}})),timer:y({fontFamily:"Inter",fontSize:p.Tokens.type.giga,fontWeight:"700",color:p.Tokens.colors.text.primary,fontVariant:["tabular-nums"],textAlign:"center",letterSpacing:-2},c.Platform.select({web:{textShadow:"0 4px 20px rgba(0,0,0,0.5)"}})),phaseText:y({fontFamily:"Inter",fontSize:p.Tokens.type.xl,fontWeight:"600",marginTop:p.Tokens.spacing[2],textTransform:"uppercase",letterSpacing:2},c.Platform.select({web:{transition:p.Tokens.motion.transitions.base}})),phaseTextFocus:{color:p.Tokens.colors.error.main},phaseTextBreak:{color:p.Tokens.colors.success.main},controls:{width:"100%",maxWidth:320,gap:p.Tokens.spacing[4]},controlBtn:{width:"100%"}});t.default=function(){var e=(0,u.useState)(!0),t=(0,i.default)(e,2),r=t[0],o=t[1],n=(0,u.useState)(1500),a=(0,i.default)(n,2),p=a[0],k=a[1],y=(0,u.useState)(!1),T=(0,i.default)(y,2),N=T[0],w=T[1],S=(0,u.useState)(0),x=(0,i.default)(S,2),v=x[0],O=x[1],E=(0,u.useRef)(null),P=(0,u.useRef)(r);(0,u.useEffect)(function(){P.current=r},[r]),(0,u.useEffect)(function(){var e,t=(e=(0,l.default)(s.default.mark(function e(){var t;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,m.default.getJSON(m.default.STORAGE_KEYS.pomodoroState);case 1:if(t=e.sent){e.next=2;break}return e.abrupt("return");case 2:"boolean"==typeof t.isWorking&&o(t.isWorking),"number"==typeof t.timeLeft&&k(t.timeLeft),"number"==typeof t.sessions&&O(t.sessions);case 3:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)});return t(),function(){E.current&&clearInterval(E.current)}},[]),(0,u.useEffect)(function(){m.default.setJSON(m.default.STORAGE_KEYS.pomodoroState,{isWorking:r,timeLeft:p,sessions:v})},[r,p,v]);var C=r?h.phaseIndicatorFocus:h.phaseIndicatorBreak,I=r?h.phaseTextFocus:h.phaseTextBreak;return u.default.createElement(c.SafeAreaView,{style:h.container,__self:_,__source:{fileName:g,lineNumber:129,columnNumber:5}},u.default.createElement(c.View,{style:h.content,__self:_,__source:{fileName:g,lineNumber:130,columnNumber:7}},u.default.createElement(c.View,{style:h.header,__self:_,__source:{fileName:g,lineNumber:131,columnNumber:9}},u.default.createElement(c.Text,{style:h.title,__self:_,__source:{fileName:g,lineNumber:132,columnNumber:11}},"Pomodoro"),u.default.createElement(c.Text,{style:h.subtitle,__self:_,__source:{fileName:g,lineNumber:133,columnNumber:11}},r?"Focus Block":"Recovery Break")),u.default.createElement(c.View,{style:h.timerCard,__self:_,__source:{fileName:g,lineNumber:138,columnNumber:9}},u.default.createElement(c.View,{style:[h.phaseIndicator,C],__self:_,__source:{fileName:g,lineNumber:139,columnNumber:11}}),u.default.createElement(c.Text,{style:h.timer,__self:_,__source:{fileName:g,lineNumber:140,columnNumber:11}},(0,d.formatTime)(p)),u.default.createElement(c.Text,{style:[h.phaseText,I],__self:_,__source:{fileName:g,lineNumber:141,columnNumber:11}},r?"ðŸ”¥ Focus":"ðŸŒ¿ Rest")),u.default.createElement(c.View,{style:h.sessionCounter,__self:_,__source:{fileName:g,lineNumber:146,columnNumber:9}},u.default.createElement(c.View,{style:h.sessionBadge,__self:_,__source:{fileName:g,lineNumber:147,columnNumber:11}},u.default.createElement(c.Text,{style:h.sessionCount,__self:_,__source:{fileName:g,lineNumber:148,columnNumber:13}},v)),u.default.createElement(c.Text,{style:h.sessionLabel,__self:_,__source:{fileName:g,lineNumber:150,columnNumber:11}},"Completed Sessions")),u.default.createElement(c.View,{style:h.controls,__self:_,__source:{fileName:g,lineNumber:153,columnNumber:9}},N?u.default.createElement(b.LinearButton,{title:"Pause",onPress:function(){w(!1),E.current&&clearInterval(E.current)},variant:"secondary",size:"lg",style:h.controlBtn,__self:_,__source:{fileName:g,lineNumber:163,columnNumber:13}}):u.default.createElement(b.LinearButton,{title:"Start Timer",onPress:function(){w(!0),E.current=setInterval(function(){k(function(e){return e<=1?P.current?(O(function(e){return e+1}),o(!1),f.default.playCompletionSound(),300):(o(!0),f.default.playNotificationSound(),1500):e-1})},1e3)},variant:r?"primary":"secondary",size:"lg",style:h.controlBtn,__self:_,__source:{fileName:g,lineNumber:155,columnNumber:13}}),u.default.createElement(b.LinearButton,{title:"Reset",onPress:function(){w(!1),o(!0),k(1500),E.current&&clearInterval(E.current)},variant:"ghost",size:"md",__self:_,__source:{fileName:g,lineNumber:171,columnNumber:11}}))))}}}]);
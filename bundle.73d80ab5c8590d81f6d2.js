(self.webpackChunkspark_adhd_rn=self.webpackChunkspark_adhd_rn||[]).push([[728],{51728(e,t,r){var n=r(18772),o=r(66584);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(16578)),i=n(r(3791)),s=n(r(51750)),l=n(r(26007)),u=n(r(58361)),c=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var r,n,a={__proto__:null,default:e};if(null===e||"object"!=o(e)&&"function"!=typeof e)return a;if(r=t){if(r.has(e))return r.get(e);r.set(e,a)}for(var i in e)"default"!==i&&{}.hasOwnProperty.call(e,i)&&((n=(r=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,i))&&(n.get||n.set)?r(a,i,n):a[i]=e[i]);return a}(e)}(r(25602)),d=r(71582),f=n(r(40629)),m=n(r(81731)),p=n(r(75128)),g=n(r(41262)),b=r(15547),y=r(56045),k=r(46586),_=this,h="C:\\Users\\Steve\\OneDrive\\Desktop\\Github Repos\\spark-adhd-backup\\src\\screens\\BrainDumpScreen.tsx";function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var v={top:k.Tokens.spacing[4],bottom:k.Tokens.spacing[4],left:k.Tokens.spacing[4],right:k.Tokens.spacing[4]},N=d.StyleSheet.create({container:{flex:1,backgroundColor:k.Tokens.colors.neutral.darkest},centerContainer:{flex:1,alignItems:"center"},contentWrapper:{flex:1,width:"100%",maxWidth:680,padding:k.Tokens.spacing[6]},header:{marginBottom:k.Tokens.spacing[8]},title:{fontFamily:"Inter",fontSize:32,fontWeight:"800",color:k.Tokens.colors.text.primary,marginBottom:k.Tokens.spacing[2],letterSpacing:-1},subtitle:{fontFamily:"Inter",fontSize:k.Tokens.type.base,color:k.Tokens.colors.text.secondary},inputSection:{flexDirection:"row",marginBottom:k.Tokens.spacing[8],gap:k.Tokens.spacing[3],alignItems:"center"},inputWrapper:T({flex:1,backgroundColor:k.Tokens.colors.neutral.darker,borderRadius:k.Tokens.radii.lg,borderWidth:1,borderColor:k.Tokens.colors.neutral.borderSubtle,minHeight:56,justifyContent:"center"},d.Platform.select({web:{transition:k.Tokens.motion.transitions.base}})),inputWrapperFocused:T({borderColor:k.Tokens.colors.brand[500]},d.Platform.select({web:{boxShadow:"0 0 0 2px ".concat(k.Tokens.colors.brand[900])}})),input:T({paddingHorizontal:k.Tokens.spacing[4],color:k.Tokens.colors.text.primary,fontFamily:"Inter",fontSize:k.Tokens.type.base,minHeight:56,textAlignVertical:"center",paddingVertical:0},d.Platform.select({web:{outlineStyle:"none"}})),addButton:{minHeight:56,width:80,justifyContent:"center",alignItems:"center"},actionsBar:{flexDirection:"row",justifyContent:"space-between",marginBottom:k.Tokens.spacing[4],paddingHorizontal:k.Tokens.spacing[2],alignItems:"center"},countText:{fontFamily:"Inter",color:k.Tokens.colors.text.tertiary,fontSize:k.Tokens.type.xs,fontWeight:"600",textTransform:"uppercase",letterSpacing:1},clearText:{fontFamily:"Inter",color:k.Tokens.colors.error.main,fontSize:k.Tokens.type.xs,fontWeight:"600",textTransform:"uppercase",letterSpacing:1},clearHovered:{opacity:.8},clearPressed:{opacity:.6},listContent:{paddingBottom:k.Tokens.spacing[16]},item:T({backgroundColor:k.Tokens.colors.neutral.darker,borderRadius:k.Tokens.radii.lg,paddingHorizontal:k.Tokens.spacing[5],paddingVertical:k.Tokens.spacing[4],marginBottom:k.Tokens.spacing[3],flexDirection:"row",justifyContent:"space-between",alignItems:"center",borderWidth:1,borderColor:k.Tokens.colors.neutral.borderSubtle},d.Platform.select({web:{transition:"all 0.2s ease"}})),itemText:{flex:1,color:k.Tokens.colors.text.primary,fontFamily:"Inter",fontSize:k.Tokens.type.base,lineHeight:24,marginRight:k.Tokens.spacing[4]},deleteButton:T({padding:k.Tokens.spacing[2],borderRadius:k.Tokens.radii.full,width:36,height:36,alignItems:"center",justifyContent:"center"},d.Platform.select({web:{transition:k.Tokens.motion.transitions.base}})),deleteButtonHovered:{backgroundColor:k.Tokens.colors.neutral.dark},deleteButtonPressed:{backgroundColor:k.Tokens.colors.error.subtle},deleteText:{color:k.Tokens.colors.text.tertiary,fontSize:24,fontWeight:"300",marginTop:-2},emptyState:{alignItems:"center",marginTop:k.Tokens.spacing[12],opacity:.5},emptyIcon:{fontSize:48,marginBottom:k.Tokens.spacing[4]},emptyText:{fontFamily:"Inter",color:k.Tokens.colors.text.tertiary,fontSize:k.Tokens.type.base},recordSection:{alignItems:"center",marginBottom:k.Tokens.spacing[8]},recordButton:{flexDirection:"row",alignItems:"center",backgroundColor:k.Tokens.colors.neutral.darker,paddingHorizontal:k.Tokens.spacing[6],paddingVertical:k.Tokens.spacing[3],borderRadius:k.Tokens.radii.full,borderWidth:1,borderColor:k.Tokens.colors.neutral.border,minWidth:160,justifyContent:"center"},recordButtonActive:{backgroundColor:k.Tokens.colors.error.main+"20",borderColor:k.Tokens.colors.error.main},recordButtonProcessing:{opacity:.7},recordButtonPressed:{opacity:.8,transform:[{scale:.98}]},recordIcon:{fontSize:20,marginRight:k.Tokens.spacing[2]},recordText:{fontFamily:"Inter",fontSize:k.Tokens.type.base,fontWeight:"600",color:k.Tokens.colors.text.primary},errorText:{fontFamily:"Inter",fontSize:k.Tokens.type.xs,color:k.Tokens.colors.error.main,marginTop:k.Tokens.spacing[2],textAlign:"center"}});t.default=function(){var e,t=(0,c.useState)(""),r=(0,u.default)(t,2),n=r[0],o=r[1],i=(0,c.useState)([]),x=(0,u.default)(i,2),T=x[0],w=x[1],S=(0,c.useState)(!1),P=(0,u.default)(S,2),E=P[0],I=P[1],O=(0,c.useState)("idle"),A=(0,u.default)(O,2),R=A[0],C=A[1],B=(0,c.useState)(null),j=(0,u.default)(B,2),W=j[0],z=j[1],D=(e=(0,l.default)(a.default.mark(function e(){var t,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,f.default.getJSON(f.default.STORAGE_KEYS.brainDump);case 1:if((t=e.sent)&&Array.isArray(t)){e.next=2;break}return e.abrupt("return");case 2:r=t.filter(function(e){return Boolean((null==e?void 0:e.id)&&(null==e?void 0:e.text)&&(null==e?void 0:e.createdAt))}),d.LayoutAnimation.configureNext(d.LayoutAnimation.Presets.easeInEaseOut),w(r);case 3:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)});(0,c.useEffect)(function(){"android"===d.Platform.OS&&d.UIManager.setLayoutAnimationEnabledExperimental&&d.UIManager.setLayoutAnimationEnabledExperimental(!0),D()},[]),(0,c.useEffect)(function(){f.default.setJSON(f.default.STORAGE_KEYS.brainDump,T),g.default.updateCount(T.length)},[T]);var F=function(){if(n.trim()){d.LayoutAnimation.configureNext(d.LayoutAnimation.Presets.easeInEaseOut);var e={id:(0,b.generateId)(),text:n.trim(),createdAt:(new Date).toISOString(),source:"text"};w(function(t){return[e].concat((0,s.default)(t))}),o("")}},L=(0,c.useCallback)((0,l.default)(a.default.mark(function e(){var t,r,n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(z(null),"idle"!==R){e.next=2;break}return e.next=1,m.default.startRecording();case 1:e.sent?C("recording"):z("Could not start recording. Check microphone permissions."),e.next=6;break;case 2:if("recording"!==R){e.next=6;break}return C("processing"),e.next=3,m.default.stopRecording();case 3:if(t=e.sent){e.next=4;break}return z("Recording failed."),C("idle"),e.abrupt("return");case 4:return e.next=5,p.default.transcribe(t.uri);case 5:(r=e.sent).success&&r.transcription?(d.LayoutAnimation.configureNext(d.LayoutAnimation.Presets.easeInEaseOut),n={id:(0,b.generateId)(),text:r.transcription,createdAt:(new Date).toISOString(),source:"audio",audioPath:t.uri},w(function(e){return[n].concat((0,s.default)(e))})):z(r.error||"Transcription failed."),C("idle");case 6:case"end":return e.stop()}},e)})),[R]);return c.default.createElement(d.SafeAreaView,{style:N.container,__self:_,__source:{fileName:h,lineNumber:164,columnNumber:5}},c.default.createElement(d.View,{style:N.centerContainer,__self:_,__source:{fileName:h,lineNumber:165,columnNumber:7}},c.default.createElement(d.View,{style:N.contentWrapper,__self:_,__source:{fileName:h,lineNumber:166,columnNumber:9}},c.default.createElement(d.View,{style:N.header,__self:_,__source:{fileName:h,lineNumber:167,columnNumber:11}},c.default.createElement(d.Text,{style:N.title,__self:_,__source:{fileName:h,lineNumber:168,columnNumber:13}},"Brain Dump"),c.default.createElement(d.Text,{style:N.subtitle,__self:_,__source:{fileName:h,lineNumber:169,columnNumber:13}},"Unload your thoughts. We'll keep them safe.")),c.default.createElement(d.View,{style:N.inputSection,__self:_,__source:{fileName:h,lineNumber:174,columnNumber:11}},c.default.createElement(d.View,{style:[N.inputWrapper,E&&N.inputWrapperFocused],__self:_,__source:{fileName:h,lineNumber:175,columnNumber:13}},c.default.createElement(d.TextInput,{style:N.input,placeholder:"What's on your mind?",placeholderTextColor:k.Tokens.colors.text.tertiary,value:n,onChangeText:o,onSubmitEditing:F,onFocus:function(){return I(!0)},onBlur:function(){return I(!1)},multiline:!1,__self:_,__source:{fileName:h,lineNumber:181,columnNumber:15}})),c.default.createElement(y.LinearButton,{title:"Add",onPress:F,size:"lg",style:N.addButton,__self:_,__source:{fileName:h,lineNumber:193,columnNumber:13}})),c.default.createElement(d.View,{style:N.recordSection,__self:_,__source:{fileName:h,lineNumber:202,columnNumber:11}},c.default.createElement(d.Pressable,{onPress:L,disabled:"processing"===R,style:function(e){var t=e.pressed;return[N.recordButton,"recording"===R&&N.recordButtonActive,"processing"===R&&N.recordButtonProcessing,t&&N.recordButtonPressed]},__self:_,__source:{fileName:h,lineNumber:203,columnNumber:13}},"processing"===R?c.default.createElement(d.ActivityIndicator,{size:"small",color:k.Tokens.colors.text.primary,__self:_,__source:{fileName:h,lineNumber:214,columnNumber:17}}):c.default.createElement(d.Text,{style:N.recordIcon,__self:_,__source:{fileName:h,lineNumber:216,columnNumber:17}},"recording"===R?"‚èπÔ∏è":"üéôÔ∏è"),c.default.createElement(d.Text,{style:N.recordText,__self:_,__source:{fileName:h,lineNumber:220,columnNumber:15}},"idle"===R&&"Record","recording"===R&&"Stop","processing"===R&&"Processing...")),W&&c.default.createElement(d.Text,{style:N.errorText,__self:_,__source:{fileName:h,lineNumber:227,columnNumber:15}},W)),T.length>0&&c.default.createElement(d.View,{style:N.actionsBar,__self:_,__source:{fileName:h,lineNumber:232,columnNumber:13}},c.default.createElement(d.Text,{style:N.countText,__self:_,__source:{fileName:h,lineNumber:233,columnNumber:15}},T.length," items"),c.default.createElement(d.Pressable,{onPress:function(){d.LayoutAnimation.configureNext(d.LayoutAnimation.Presets.easeInEaseOut),w([])},style:function(e){var t=e.pressed;return[e.hovered&&N.clearHovered,t&&N.clearPressed]},__self:_,__source:{fileName:h,lineNumber:234,columnNumber:15}},c.default.createElement(d.Text,{style:N.clearText,__self:_,__source:{fileName:h,lineNumber:241,columnNumber:17}},"Clear All"))),c.default.createElement(d.FlatList,{data:T,keyExtractor:function(e){return e.id},renderItem:function(e){var t=e.item;return c.default.createElement(d.View,{style:N.item,__self:_,__source:{fileName:h,lineNumber:147,columnNumber:5}},c.default.createElement(d.Text,{style:N.itemText,__self:_,__source:{fileName:h,lineNumber:148,columnNumber:7}},t.text),c.default.createElement(d.Pressable,{onPress:function(){return e=t.id,d.LayoutAnimation.configureNext(d.LayoutAnimation.Presets.easeInEaseOut),void w(function(t){return t.filter(function(t){return t.id!==e})});var e},style:function(e){var t=e.pressed,r=e.hovered;return[N.deleteButton,r&&N.deleteButtonHovered,t&&N.deleteButtonPressed]},hitSlop:v,__self:_,__source:{fileName:h,lineNumber:149,columnNumber:7}},c.default.createElement(d.Text,{style:N.deleteText,__self:_,__source:{fileName:h,lineNumber:158,columnNumber:9}},"√ó")))},contentContainerStyle:N.listContent,showsVerticalScrollIndicator:!1,ListEmptyComponent:c.default.createElement(d.View,{style:N.emptyState,__self:_,__source:{fileName:h,lineNumber:253,columnNumber:15}},c.default.createElement(d.Text,{style:N.emptyIcon,__self:_,__source:{fileName:h,lineNumber:254,columnNumber:17}},"‚òÅÔ∏è"),c.default.createElement(d.Text,{style:N.emptyText,__self:_,__source:{fileName:h,lineNumber:255,columnNumber:17}},"Your mind is clear... for now.")),__self:_,__source:{fileName:h,lineNumber:246,columnNumber:11}}))))}},75128(e,t,r){var n=r(18772);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PlaudService=void 0;var o,a,i=n(r(16578)),s=n(r(26007)),l=n(r(66593)),u=n(r(82857)),c=r(71582),d=(0,u.default)(function e(){(0,l.default)(this,e),this.apiUrl=void 0,this.apiUrl="https://spark-adhd-api.vercel.app"},[{key:"setApiUrl",value:function(e){this.apiUrl=e}},{key:"transcribe",value:(a=(0,s.default)(i.default.mark(function e(t){var r,n,o,a,s,l,u;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=new FormData,"web"!==c.Platform.OS){e.next=3;break}return e.next=1,fetch(t);case 1:return n=e.sent,e.next=2,n.blob();case 2:o=e.sent,r.append("audio",o),e.next=4;break;case 3:r.append("audio",{uri:t,type:"audio/m4a",name:"recording.m4a"});case 4:return e.next=5,fetch("".concat(this.apiUrl,"/api/transcribe"),{method:"POST",body:r,headers:{Accept:"application/json"}});case 5:if((a=e.sent).ok){e.next=7;break}return e.next=6,a.json().catch(function(){return{}});case 6:return s=e.sent,e.abrupt("return",{success:!1,error:s.error||"Request failed with status ".concat(a.status)});case 7:return e.next=8,a.json();case 8:return l=e.sent,e.abrupt("return",{success:!0,transcription:l.transcription,summary:l.summary});case 9:return e.prev=9,u=e.catch(0),console.error("Transcription error:",u),e.abrupt("return",{success:!1,error:u instanceof Error?u.message:"Unknown error"});case 10:case"end":return e.stop()}},e,this,[[0,9]])})),function(e){return a.apply(this,arguments)})},{key:"healthCheck",value:(o=(0,s.default)(i.default.mark(function e(){var t;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,fetch("".concat(this.apiUrl,"/api/auth"),{method:"POST"});case 1:return t=e.sent,e.abrupt("return",0!==t.status);case 2:return e.prev=2,e.catch(0),e.abrupt("return",!1);case 3:case"end":return e.stop()}},e,this,[[0,2]])})),function(){return o.apply(this,arguments)})}]),f=t.PlaudService=new d;t.default=f},81731(e,t,r){var n=r(18772);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.RecordingService=void 0;var o,a,i,s,l=n(r(16578)),u=n(r(26007)),c=n(r(66593)),d=n(r(82857)),f=function(){try{var e;return null!==(e=r(59654).Audio)&&void 0!==e?e:null}catch(e){return null}},m=(0,d.default)(function e(){(0,c.default)(this,e),this.recording=null,this.isRecording=!1},[{key:"requestPermissions",value:(s=(0,u.default)(l.default.mark(function e(){var t,r,n,o;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=f()){e.next=1;break}return console.warn("Recording unavailable: expo-av is not installed"),e.abrupt("return",!1);case 1:return e.next=2,t.requestPermissionsAsync();case 2:return r=e.sent,n=r.status,e.abrupt("return","granted"===n);case 3:return e.prev=3,o=e.catch(0),console.error("Permission request failed:",o),e.abrupt("return",!1);case 4:case"end":return e.stop()}},e,null,[[0,3]])})),function(){return s.apply(this,arguments)})},{key:"startRecording",value:(i=(0,u.default)(l.default.mark(function e(){var t,r,n,o;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isRecording){e.next=1;break}return console.warn("Already recording"),e.abrupt("return",!1);case 1:if(e.prev=1,t=f()){e.next=2;break}return console.warn("Recording unavailable: expo-av is not installed"),e.abrupt("return",!1);case 2:return e.next=3,this.requestPermissions();case 3:if(e.sent){e.next=4;break}return console.error("Microphone permission not granted"),e.abrupt("return",!1);case 4:return e.next=5,t.setAudioModeAsync({allowsRecordingIOS:!0,playsInSilentModeIOS:!0});case 5:return e.next=6,t.Recording.createAsync(t.Recording.OptionsPresets.HIGH_QUALITY);case 6:return r=e.sent,n=r.recording,this.recording=n,this.isRecording=!0,console.log("Recording started"),e.abrupt("return",!0);case 7:return e.prev=7,o=e.catch(1),console.error("Failed to start recording:",o),e.abrupt("return",!1);case 8:case"end":return e.stop()}},e,this,[[1,7]])})),function(){return i.apply(this,arguments)})},{key:"stopRecording",value:(a=(0,u.default)(l.default.mark(function e(){var t,r,n,o;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.recording&&this.isRecording){e.next=1;break}return console.warn("No active recording"),e.abrupt("return",null);case 1:if(e.prev=1,t=f()){e.next=2;break}return console.warn("Recording unavailable: expo-av is not installed"),this.recording=null,this.isRecording=!1,e.abrupt("return",null);case 2:return e.next=3,this.recording.stopAndUnloadAsync();case 3:return e.next=4,t.setAudioModeAsync({allowsRecordingIOS:!1});case 4:return r=this.recording.getURI(),e.next=5,this.recording.getStatusAsync();case 5:if(n=e.sent,this.recording=null,this.isRecording=!1,r){e.next=6;break}return console.error("No recording URI"),e.abrupt("return",null);case 6:return console.log("Recording stopped:",r),e.abrupt("return",{uri:r,duration:n.durationMillis||0});case 7:return e.prev=7,o=e.catch(1),console.error("Failed to stop recording:",o),this.recording=null,this.isRecording=!1,e.abrupt("return",null);case 8:case"end":return e.stop()}},e,this,[[1,7]])})),function(){return a.apply(this,arguments)})},{key:"getIsRecording",value:function(){return this.isRecording}},{key:"cancelRecording",value:(o=(0,u.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.recording){e.next=5;break}return e.prev=1,e.next=2,this.recording.stopAndUnloadAsync();case 2:e.next=4;break;case 3:e.prev=3,e.catch(1);case 4:this.recording=null,this.isRecording=!1;case 5:case"end":return e.stop()}},e,this,[[1,3]])})),function(){return o.apply(this,arguments)})},{key:"reset",value:function(){this.recording=null,this.isRecording=!1}}]),p=t.RecordingService=new m;t.default=p}}]);